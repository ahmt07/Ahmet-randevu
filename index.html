<!DOCTYPE html><html lang="tr"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ahmet Tekeli Erkek Kuaförü - Randevu Sistemi</title>
<style>
:root{--bg:#0b1016;--panel:#0e141b;--text:#e6eaf0;--muted:#9aa7b7;--stroke:#1c2735;--gold:#f4c756}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:linear-gradient(180deg,#0a0f14,#0c1117 65%);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial}
.wrap{max-width:980px;margin:20px auto;padding:0 14px}
.header{display:flex;align-items:center;justify-content:space-between;gap:12px;background:#0f151c;border:1px solid var(--stroke);border-radius:16px;padding:14px 16px;box-shadow:0 14px 34px rgba(0,0,0,.35)}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;background:#161c25;border:1px solid #243245}
.title{font-weight:800}.subtitle{color:var(--muted);font-size:12px;margin-top:2px}
.head-actions{display:flex;flex-direction:column;gap:8px}
.hbtn{padding:10px 14px;border-radius:10px;border:1px solid rgba(244,199,86,.45);background:#181e26;color:#f6d98a;font-weight:800;cursor:pointer}
.panel{margin-top:14px;background:#0f151c;border:1px solid var(--stroke);border-radius:16px;padding:16px}
legend{color:#f1da9a;font-weight:900;margin-bottom:8px}
label{display:block;font-size:14px;color:#cfe0f0;margin:10px 6px 6px}
input,select,button{width:100%;border-radius:12px;border:1px solid #2a384a;background:#0b1219;color:var(--text);padding:12px 14px;font-size:16px;outline:none}
.row{display:flex;gap:12px;flex-wrap:wrap}.row>*{flex:1 1 220px}
.action{border:1px solid rgba(244,199,86,.45);background:#19222c;color:#ffd977;font-weight:900;border-radius:12px;padding:12px 16px;cursor:pointer}
.help{color:#95a3b5;font-size:12px;margin-top:8px}
.pill{font-size:12px;border:1px solid #314259;border-radius:999px;padding:4px 8px;background:#0b1219}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);padding:16px;z-index:40}
.modal.show{display:flex}.sheet{max-width:860px;width:100%;background:#0e141b;border:1px solid #1a2432;border-radius:16px;padding:14px}
.tabs{display:flex;gap:8px;margin:4px 0 10px}.tab{flex:1;text-align:center;border:1px solid #273346;border-radius:10px;padding:10px 12px;background:#0b1219;color:#d9e1ea;font-weight:800;cursor:pointer}.tab.active{border-color:rgba(244,199,86,.5);background:#151d25;color:#ffe59a}
.table{width:100%;border-collapse:collapse}.table th,.table td{border-bottom:1px solid #223043;padding:10px 8px;text-align:left;font-size:14px}
.empty{color:#90a0b3;text-align:center;padding:10px 0}
@media (max-width:760px){.head-actions{flex-direction:row}.hbtn{padding:8px 12px}}
</style></head><body><div class="wrap">
<div class="header">
  <div class="brand">
    <div class="logo"><svg viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#f4c756" stroke-width="1.4"/><path d="M7 8l4 4-4 4M17 8l-4 4 4 4" stroke="#e6eaf0" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
    <div><div class="title">Ahmet Tekeli Erkek Kuaförü</div><div class="subtitle">Randevu Sistemi</div></div>
  </div>
  <div class="head-actions"><button class="hbtn" id="openAdmin">🛠️ Admin</button><button class="hbtn" id="openCustomer">👤 Müşteri</button></div>
</div>
<form class="panel" id="qForm" onsubmit="return false">
  <legend>Randevu</legend>
  <div class="row"><div><label>Berber</label><select id="qBarber"></select></div><div><label>Hizmet</label><select id="qService"></select></div></div>
  <div class="row"><div><label>Tarih</label><input id="qDate" type="date"></div><div><label>Saat</label><select id="qTime"><option value=''>Uygun saat için seçimleri yapın</option></select></div></div>
  <div class="row"><div><label>Ad Soyad</label><input id="qName" placeholder="Adınız ve Soyadınız"></div><div><label>Telefon</label><input id="qPhone" placeholder="05xxxxxxxxx" inputmode="numeric"></div></div>
  <div class="row"><button type="button" class="action" id="qBook">Randevu Al</button><button type="button" class="action" id="qMine">Randevularım</button></div>
  <div class="help"><span class="pill">Bilgi</span> Aynı berber aynı saatte ikinci randevuya izin verilmez.</div>
</form>

<div class="modal" id="cModal"><div class="sheet">
  <h3>Müşteri – Giriş / Kayıt</h3>
  <div class="tabs"><div class="tab active" data-ctab="c-login">Giriş</div><div class="tab" data-ctab="c-register">Kayıt Ol</div><div class="tab" data-ctab="c-my">Randevularım</div><div style="margin-left:auto"><button class="tab" id="cClose">Kapat</button></div></div>
  <div id="c-login"><div class="row"><div><label>Telefon</label><input id="clPhone"></div><div><label>Şifre</label><input id="clPwd" type="password"></div></div><button class="action" id="btnLogin">Giriş Yap</button></div>
  <div id="c-register" class="hidden"><div class="row"><div><label>Ad Soyad</label><input id="crName"></div><div><label>Telefon</label><input id="crPhone"></div></div><div class="row"><div><label>Şifre</label><input id="crPwd" type="password"></div></div><button class="action" id="btnRegister">Kayıt Ol</button></div>
  <div id="c-my" class="hidden"><div id="myList"></div></div>
</div></div>

<div class="modal" id="aModal"><div class="sheet">
  <h3>Admin Paneli</h3>
  <div id="aGate"><div class="row"><div><label>Kullanıcı Adı</label><input id="adUser" placeholder="admin"></div><div><label>Şifre</label><input id="adPwd" type="password" placeholder="1234"></div></div><button class="action" id="btnAdminLogin">Giriş Yap</button></div>
  <div id="aDash" class="hidden">
    <div class="tabs"><div class="tab active" data-atab="a-appts">Randevular</div><div class="tab" data-atab="a-new">Yeni Randevu</div><div class="tab" data-atab="a-settings">Ayarlar</div><div style="margin-left:auto"><button class="tab" id="aLogout">Çıkış</button></div></div>
    <div id="a-appts">
      <div class="row"><div><label>Tarih</label><input id="fDate" type="date"></div><div><label>Berber</label><select id="fBarber"></select></div><div><label>Arama</label><input id="fQ" placeholder="Ad/telefon"></div></div>
      <div style="overflow:auto;margin-top:10px"><table class="table" id="aTable"><thead><tr><th>Tarih</th><th>Saat</th><th>Berber</th><th>Hizmet</th><th>Süre</th><th>Müşteri</th><th>Tel</th><th>İşlem</th></tr></thead><tbody></tbody></table></div>
    </div>
    <div id="a-new" class="hidden">
      <div class="row"><div><label>Müşteri</label><input id="aname"></div><div><label>Telefon</label><input id="aphone"></div></div>
      <div class="row"><div><label>Berber</label><select id="abarber"></select></div><div><label>Hizmet</label><select id="aservice"></select></div></div>
      <div class="row"><div><label>Tarih</label><input id="adate" type="date"></div><div><label>Saat</label><select id="atime"><option value=''>Uygun saat için seçimleri yapın</option></select></div></div>
      <button class="action" id="aCreate">Randevu Oluştur</button>
    </div>
    <div id="a-settings" class="hidden">
      <div class="row"><div><label>Başlangıç</label><input id="setStart" type="time"></div><div><label>Bitiş</label><input id="setEnd" type="time"></div><div><label>Slot (dk)</label><select id="setStep"><option>5</option><option>10</option><option>15</option><option>20</option><option>30</option></select></div></div>
      <div class="row"><div><label>Berberler</label><div class="row"><input id="newBarber" placeholder="Yeni berber"><button class="action" id="addBarber">Ekle</button></div><div id="barberList" class="help"></div></div>
           <div><label>Hizmetler</label><div class="row"><input id="svcName" placeholder="Ad"><input id="svcDur" type="number" min="5" step="5" value="30" style="max-width:120px"><button class="action" id="addService">Ekle</button></div><div id="serviceList" class="help"></div></div></div>
      <div class="row"><button class="action" id="resetAppts">Tüm Randevuları Sil</button><button class="action" id="resetAll">Tüm Verileri Sıfırla</button></div>
    </div>
  </div>
  <div style="margin-top:8px"><button class="tab" id="aClose">Kapat</button></div>
</div></div>

</div><script>
const LS={users:'atk_users',appts:'atk_appts',settings:'atk_settings',session:'atk_session'};
const defaults={workStart:'09:00',workEnd:'21:00',stepMin:10,barbers:['Ahmet','Ali','Mehmet'],services:[{id:'sac',name:'Saç Kesimi',duration:30},{id:'sakal',name:'Sakal',duration:20},{id:'sacsakal',name:'Saç + Sakal',duration:50},{id:'fon',name:'Fön',duration:15},{id:'boya',name:'Saç Boya',duration:60}]};
function load(k,f){try{return JSON.parse(localStorage.getItem(k))??f}catch(e){return f}} function save(k,v){localStorage.setItem(k,JSON.stringify(v))}
function uid(){return Math.random().toString(36).slice(2,10)} function $(id){return document.getElementById(id)} function clean(p){return (p||'').replace(/\D+/g,'')}
function t2m(t){let[a,b]=t.split(':').map(Number);return a*60+b} function m2t(m){let h=(''+Math.floor(m/60)).padStart(2,'0'),mm=(''+m%60).padStart(2,'0');return h+':'+mm}
function gen(st,en,stp){let a=[];for(let x=t2m(st);x<=t2m(en);x+=stp)a.push(m2t(x));return a}
let users=load(LS.users,[]),appts=load(LS.appts,[]),settings=load(LS.settings,defaults),session=load(LS.session,null);
const svcById=id=>(settings.services||[]).find(s=>s.id===id);
function conflict({barber,date,start,duration,exclude}){let s=t2m(start),e=s+duration;return appts.some(a=>{if(a.barber!==barber||a.date!==date)return false;if(exclude&&a.id===exclude)return false;let as=t2m(a.time),ae=as+a.duration;return Math.max(s,as)<Math.min(e,ae)})}
function freeTimes(barber,date,dur){if(!barber||!date||!dur)return[];return gen(settings.workStart,settings.workEnd,settings.stepMin).filter(t=>!conflict({barber,date,start:t,duration:dur})&&t2m(t)+dur<=t2m(settings.workEnd))}
function fillSelects(){qBarber.innerHTML='<option value="">Farketmez</option>'+(settings.barbers||[]).map(b=>`<option>${b}</option>`).join('');qService.innerHTML='<option value="">Hizmet seçin</option>'+(settings.services||[]).map(s=>`<option value="${s.id}">${s.name} (${s.duration} dk)</option>`).join('');fBarber.innerHTML='<option value="">Hepsi</option>'+(settings.barbers||[]).map(b=>`<option>${b}</option>`).join('');abarber.innerHTML=(settings.barbers||[]).map(b=>`<option>${b}</option>`).join('');aservice.innerHTML=(settings.services||[]).map(s=>`<option value="${s.id}">${s.name} (${s.duration} dk)</option>`).join('')}
function updateTimes(selTime,selBarber,selDate,selSvc){let b=$(selBarber).value||settings.barbers[0],d=$(selDate).value,svc=svcById($(selSvc).value),t=$(selTime);if(!b||!d||!svc){t.innerHTML='<option value="">Uygun saat için seçimleri yapın</option>';return}let arr=freeTimes(b,d,svc.duration);t.innerHTML=arr.length?arr.map(x=>`<option value="${x}">${x}</option>`).join(''):'<option>Uygun saat yok</option>'}
['qBarber','qService','qDate'].forEach(id=>$(id).addEventListener('change',()=>updateTimes('qTime','qBarber','qDate','qService')));
function createAppt({userId,name,phone,barber,serviceId,date,time}){let svc=svcById(serviceId);if(!svc)return alert('Hizmet seçin.');if(!barber||!date||!time||!name||!phone)return alert('Tüm alanlar zorunludur.');if(conflict({barber,date,start:time,duration:svc.duration}))return alert('Bu saat dolu.');appts.push({id:uid(),userId:userId||null,name,phone:clean(phone),barber,serviceId,serviceName:svc.name,duration:svc.duration,date,time});save(LS.appts,appts);alert('Randevu oluşturuldu.');renderTable();renderMine()}
qBook.onclick=()=>{let barber=qBarber.value||settings.barbers[0],serviceId=qService.value,date=qDate.value,time=qTime.value,name=qName.value.trim(),phone=qPhone.value.trim(),u=users.find(x=>clean(x.phone)===clean(phone));createAppt({userId:u?u.id:null,name,phone,barber,serviceId,date,time})};
qMine.onclick=()=>{cModal.classList.add('show');setCTab('c-my');renderMine()};
function setCTab(x){['c-login','c-register','c-my'].forEach(id=>$(id).classList.toggle('hidden',id!==x));document.querySelectorAll('#cModal .tab').forEach(t=>t.classList.toggle('active',t.dataset.ctab===x))}
openCustomer.onclick=()=>cModal.classList.add('show'); cClose.onclick=()=>cModal.classList.remove('show');
document.querySelectorAll('#cModal .tab').forEach(t=>t.addEventListener('click',()=>setCTab(t.dataset.ctab)));
btnRegister.onclick=()=>{let name=crName.value.trim(),phone=clean(crPhone.value),pwd=crPwd.value;if(!name||!phone||!pwd)return alert('Tüm alanlar zorunlu.');if(users.some(u=>u.phone===phone))return alert('Bu telefon kayıtlı.');let u={id:uid(),name,phone,pwd};users.push(u);save(LS.users,users);session={id:u.id};save(LS.session,session);alert('Kayıt başarılı.');setCTab('c-my');renderMine()}
btnLogin.onclick=()=>{let phone=clean(clPhone.value),pwd=clPwd.value,u=users.find(u=>u.phone===phone&&u.pwd===pwd);if(!u)return alert('Telefon veya şifre hatalı.');session={id:u.id};save(LS.session,session);alert('Giriş başarılı.');setCTab('c-my');renderMine()}
function renderMine(){let w=myList;w.innerHTML='';let u=session?users.find(x=>x.id===session.id):null;if(!u){w.innerHTML='<div class="empty">Giriş yapın ya da kayıt olun.</div>';return}let list=appts.filter(a=>a.userId===u.id).sort((a,b)=>a.date.localeCompare(b.date)||a.time.localeCompare(b.time));if(!list.length){w.innerHTML='<div class="empty">Henüz randevunuz yok.</div>';return}list.forEach(a=>{let row=document.createElement('div');row.className='row';row.style.margin='6px 0';let rBtns=document.createElement('div');rBtns.style.display='flex';rBtns.style.gap='8px';let e=document.createElement('button');e.className='action';e.textContent='Değiştir';e.onclick=()=>{qBarber.value=a.barber;qService.value=a.serviceId;qDate.value=a.date;updateTimes('qTime','qBarber','qDate','qService');qTime.value=a.time;window.scrollTo({top:0,behavior:'smooth'})};let d=document.createElement('button');d.className='action';d.textContent='İptal';d.onclick=()=>{if(confirm('İptal edilsin mi?')){appts=appts.filter(x=>x.id!==a.id);save(LS.appts,appts);renderMine();renderTable()}};rBtns.append(e,d);row.innerHTML=`<div><span class='pill'>${a.date} • ${a.time}</span> <b>${a.serviceName}</b> <span class='help'>(${a.duration} dk)</span> — <span class='help'>${a.barber}</span></div>`;row.append(rBtns);w.append(row)})}
openAdmin.onclick=()=>aModal.classList.add('show'); aClose.onclick=()=>aModal.classList.remove('show');
btnAdminLogin.onclick=()=>{if(adUser.value.trim()==='admin'&&adPwd.value==='1234'){aGate.classList.add('hidden');aDash.classList.remove('hidden');fillSelects();renderTable();loadSettings()}else alert('Hatalı giriş.')};
aLogout.onclick=()=>{aDash.classList.add('hidden');aGate.classList.remove('hidden')};
document.querySelectorAll('#aModal .tab').forEach(t=>t.addEventListener('click',()=>{['a-appts','a-new','a-settings'].forEach(id=>$(id).classList.toggle('hidden',id!==t.dataset.atab));document.querySelectorAll('#aModal .tab').forEach(x=>x.classList.toggle('active',x.dataset.atab===t.dataset.atab))}));
function renderTable(){let body=document.querySelector('#aTable tbody');body.innerHTML='';let list=[...appts],df=fDate.value,bf=fBarber.value,q=(fQ.value||'').toLowerCase();if(df)list=list.filter(a=>a.date===df);if(bf)list=list.filter(a=>a.barber===bf);if(q)list=list.filter(a=>(a.name||'').toLowerCase().includes(q)||(a.phone||'').toLowerCase().includes(q));list.sort((a,b)=>a.date.localeCompare(b.date)||a.time.localeCompare(b.time));if(!list.length){let tr=document.createElement('tr'),td=document.createElement('td');td.colSpan=8;td.className='empty';td.textContent='Kayıt yok.';tr.append(td);body.append(tr);return}list.forEach(a=>{let tr=document.createElement('tr');tr.innerHTML=`<td>${a.date}</td><td>${a.time}</td><td>${a.barber}</td><td>${a.serviceName}</td><td>${a.duration} dk</td><td>${a.name||'-'}</td><td>${a.phone||'-'}</td>`;let td=document.createElement('td');let del=document.createElement('button');del.className='tab';del.textContent='Sil';del.onclick=()=>{if(confirm('Silinsin mi?')){appts=appts.filter(x=>x.id!==a.id);save(LS.appts,appts);renderTable()}};td.append(del);tr.append(td);body.append(tr)})}
;['fDate','fBarber','fQ'].forEach(id=>$(id).addEventListener('input',renderTable));
;['abarber','aservice','adate'].forEach(id=>$(id).addEventListener('change',()=>updateTimes('atime','abarber','adate','aservice')));
aCreate.onclick=()=>{createAppt({name:aname.value.trim(),phone:aphone.value.trim(),barber:abarber.value,serviceId:aservice.value,date:adate.value,time:atime.value});renderTable()};
function loadSettings(){setStart.value=settings.workStart;setEnd.value=settings.workEnd;setStep.value=String(settings.stepMin);updateLists();fillSelects()}
function updateLists(){barberList.innerHTML=(settings.barbers||[]).map((b,i)=>`<div style='margin:4px 0'><span class='pill'>${b}</span> <button class='tab' onclick='removeBarber(${i})'>Sil</button></div>`).join('');serviceList.innerHTML=(settings.services||[]).map((s,i)=>`<div style='margin:4px 0'><span class='pill'>${s.name} (${s.duration} dk)</span> <button class='tab' onclick='removeService(${i})'>Sil</button></div>`).join('')}
saveHours.onclick=()=>{let st=setStart.value,en=setEnd.value,step=parseInt(setStep.value);if(!st||!en||t2m(st)>=t2m(en))return alert('Saat aralığı geçersiz.');settings.workStart=st;settings.workEnd=en;settings.stepMin=step;save(LS.settings,settings);alert('Kaydedildi.')};
addBarber.onclick=()=>{let v=newBarber.value.trim();if(!v)return;settings.barbers.push(v);save(LS.settings,settings);newBarber.value='';loadSettings()};
addService.onclick=()=>{let n=svcName.value.trim(),d=parseInt(svcDur.value||'0');if(!n||!d)return;settings.services.push({id:'svc_'+Math.random().toString(36).slice(2,7),name:n,duration:d});save(LS.settings,settings);svcName.value='';svcDur.value='30';loadSettings()};
window.removeBarber=i=>{settings.barbers.splice(i,1);save(LS.settings,settings);loadSettings()};
window.removeService=i=>{settings.services.splice(i,1);save(LS.settings,settings);loadSettings()};
resetAppts.onclick=()=>{if(confirm('Tüm randevular silinsin mi?')){appts=[];save(LS.appts,appts);renderTable();alert('Temizlendi.')}};
resetAll.onclick=()=>{if(confirm('TÜM VERİLER silinsin mi?')){users=[];appts=[];settings=JSON.parse(JSON.stringify(defaults));session=null;save(LS.users,users);save(LS.appts,appts);save(LS.settings,settings);save(LS.session,session);loadSettings();renderTable();alert('Her şey sıfırlandı.')}};
(function(){if(!settings||!settings.barbers||!settings.services){settings=defaults;save(LS.settings,settings)}fillSelects()})();
</script></body></html>
